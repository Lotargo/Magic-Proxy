# Техническая документация: Паттерн `standard_gemini_react`

## 1. Обзор и назначение

`standard_gemini_react.py` — это **эталонная (baseline) когнитивная архитектура** для `react_driver`, оптимизированная для универсального применения с моделями класса Gemini Pro и аналогичными.

Этот паттерн реализует классический, "чистый" цикл **Think -> Action -> Observation**, без дополнительных методологических усложнений, которые присутствуют в `basic_react` (эмуляция персоны) или `deepseek_react` (принудительное планирование).

**Основное назначение:**
*   **Универсальность**: Быть достаточно гибким для решения большинства стандартных задач, требующих использования инструментов, без излишней специализации.
*   **Надежность**: Простота и ясность инструкций снижают вероятность того, что модель "запутается" или неправильно интерпретирует свою задачу.
*   **Эталон для сравнения**: Служить "контрольной группой" при разработке новых, более сложных когнитивных архитектур. Сравнивая результаты работы нового паттерна с этим базовым, можно объективно оценить, принесли ли усложнения реальную пользу.

## 2. Философия: Чистый ReAct

В отличие от специализированных паттернов, этот шаблон не пытается навязать модели сложную "философию" мышления. Вместо этого, он четко и лаконично обучает ее фундаментальным правилам ReAct-процесса. Это "безопасный" и универсальный выбор по умолчанию.

## 3. Реализация в промпте

Паттерн состоит из четко разделенных логических блоков, которые последовательно обучают модель.

### 3.1. Базовые инструкции и правила

*   **`SYSTEM_INSTRUCTION`**: Прямолинейно сообщает модели о ее роли ("large language model enabled with tools") и основной директиве ("follow the 'Think, Action, Observation' cycle").
*   **`SYSTEM_RULE`**: Содержит набор недвусмысленных, атомарных правил, касающихся языка ответа и синтаксиса тегов `<THOUGHT>` и `<ACTION>`.

### 3.2. Обучающий пример (Few-Shot Example)

Это ядро обучения. В качестве примера используется многосоставной запрос, который требует **двух последовательных вызовов инструмента** для полного ответа. Это учит модель ключевым аспектам итеративного мышления.

**Урок 1: Декомпозиция и первый шаг**
*   **Задача**: Модель учится декомпозировать сложный запрос на логические части (например, "вопрос 1: определение", "вопрос 2: компоненты").
*   **Действие**: Она выполняет первый логический шаг — ищет информацию по первой части запроса.

**Урок 2: Итеративное уточнение**
*   **Задача**: Это ключевой урок. Получив первый результат, модель анализирует его полноту (`"I have a clear definition now... but I should find a more complete list..."`).
*   **Действие**: Она осознает необходимость дальнейших действий и выполняет второй, уточняющий поиск, чтобы ответить на вторую часть запроса. Это учит модель **итеративному и методичному сбору информации**.

**Урок 3: Завершение сбора данных**
*   **Задача**: Модель учится явно констатировать, что вся необходимая информация собрана в полном объеме (`"I have successfully gathered information on both... I have enough information..."`).
*   **Действие**: Только после этого она переходит к генерации финального ответа. Это предотвращает "преждевременные" или неполные ответы.

**Урок 4: Синтез**
*   **Задача**: Модель видит, как два фрагмента информации, полученные из разных вызовов инструментов, синтезируются в единый, структурированный и исчерпывающий финальный ответ.

## 4. Практическое применение и ценность

*   **Надежная "рабочая лошадка"**: Этот паттерн хорошо подходит для большинства задач, где требуется простая логика "подумай -> найди -> ответь".
*   **Отличная стартовая точка**: При создании нового, кастомного ReAct-паттерна, `standard_gemini_react.py` является идеальной отправной точкой. Его структура логична, понятна и легко модифицируется.
*   **Диагностика и отладка**: Если более сложный паттерн работает непредсказуемо, переключение на `standard_gemini_react` может помочь локализовать проблему. Если с этим простым паттерном модель работает корректно, значит, проблема, скорее всего, в сложности самого кастомного промпта, а не в базовой логике системы.