# Руководство Пользователя: UI Песочница (Frontend)

## 1. Введение: Что такое Песочница?
UI Песочница — это интерактивная панель управления и тестирования для "MagicProxy". Она предоставляет разработчикам и промпт-инженерам удобную среду для отправки запросов, визуализации работы AI-агентов, а также для просмотра и редактирования конфигурации шлюза в реальном времени.

## 2. Обзор Интерфейса
Интерфейс состоит из трех основных разделов, переключаемых через боковую панель навигации (sidebar):

*   **Playground (`playground-tab`)**: Основная "песочница" для запуска AI-сессий и наблюдения за их работой.
*   **Prompts (`prompts-tab`)**: Редактор для управления файлами системных промптов и манифестов.
*   **Конфигурация (`admin-tab`)**: Мощный редактор для изменения основного конфигурационного файла `proxy_config.yaml`.

### 2.1. Раздел "Playground"
Это ваш основной рабочий стол. Он разделен на три части:

**Правая Боковая Панель (`right-sidebar`)**: Здесь вы настраиваете параметры для предстоящей сессии.
*   **Выберите модели для запуска**: Список всех `model_alias` из `proxy_config.yaml`. Вы можете выбрать одну или несколько моделей для одновременного запуска, чтобы сравнить их ответы на один и тот же запрос.
*   **Настройки безопасности (для моделей Gemini)**: Четыре переключателя для отключения фильтров безопасности Gemini (Оскорбления, Ненависть и т.д.).
*   **Настройки ReAct (для текущей сессии)**: Позволяют "на лету" переопределить системный промпт и манифест для конкретного агента в рамках одного запуска, не изменяя глобальную конфигурацию.

**Центральная Область (`race-track`)**: Это "чат" или "лента событий". Здесь в реальном времени отображается весь процесс выполнения сессии: мысли агента, вызовы инструментов и финальный ответ.

**Область Ввода (`chat-input-area`)**:
*   **`prompt-input`**: Текстовое поле для ввода вашего запроса.
*   **`run-button`**: Кнопка для запуска сессии с выбранными на правой панели настройками.

### 2.2. Раздел "Prompts"
Этот раздел позволяет управлять текстовыми файлами, которые используются в ReAct-паттернах.

**Редактор Системных Промптов**:
*   **`system-prompt-select`**: Выпадающий список для выбора файла из директории `system_prompts/`.
*   **`system-prompt-editor`**: Текстовый редактор для изменения содержимого выбранного промпта.
*   **`system-prompt-diff-output`**: Область, где подсвечиваются ваши изменения по сравнению с сохраненной версией.
*   **`save-prompt-btn`**: Кнопка для сохранения изменений в файле на сервере.

**Редактор Манифестов**: Аналогичный интерфейс для работы с файлами в директории `manifests/`.

### 2.3. Раздел "Конфигурация"
Этот раздел предоставляет полный контроль над `proxy_config.yaml`.
*   **Общие Настройки (`general-config-editor`)**: Текстовый редактор для изменения всех секций, кроме `model_list`.
*   **Редактор Списка Моделей (`model-list-editor-container`)**: (Ключевая особенность) Специализированный, структурированный интерфейс для редактирования `model_list`. Он позволяет удобно добавлять, удалять и изменять профили моделей, не рискуя нарушить YAML-форматирование.
*   **`add-model-btn`**: Кнопка для добавления нового пустого профиля модели в список.
*   **Изменения (Diff) (`diff-output`)**: Наглядно показывает все ваши изменения в `proxy_config.yaml` перед сохранением.

**Кнопки Действий**:
*   **`save-config-btn`**: Сохраняет изменения в `proxy_config.yaml` на сервере.
*   **`restart-btn`**: Сохраняет изменения и отправляет на сервер команду для перезапуска, чтобы немедленно применить новую конфигурацию.

## 3. Практические Сценарии Использования

### Сценарий 1: Запуск и сравнение двух моделей
1.  Перейдите во вкладку **Playground**.
2.  На правой панели в списке "Выберите модели для запуска" активируйте переключатели для `gemini-agent` и `mistral-agent`.
3.  В области ввода внизу введите запрос: "Какие последние новости в области AI?".
4.  Нажмите кнопку "Начать Сессию" (`run-button`).
5.  В центральной области (`race-track`) появятся две колонки, по одной для каждого агента. Вы сможете в реальном времени наблюдать и сравнивать их процессы мышления и финальные ответы.

### Сценарий 2: "На лету" изменить личность агента
1.  Перейдите во вкладку **Playground**.
2.  На правой панели в блоке "Настройки ReAct" выберите `gemini-agent` в первом выпадающем списке.
3.  Ниже, в списке "Системный Промпт", выберите промпт, который описывает, например, пиратскую личность.
4.  В списке "Выберите модели для запуска" убедитесь, что активен только `gemini-agent`.
5.  Отправьте запрос. Агент `gemini-agent` выполнит его, используя выбранную вами пиратскую личность, но это изменение не будет сохранено в `proxy_config.yaml` и затронет только текущую сессию.

### Сценарий 3: Добавить новую модель и перезапустить сервер
1.  Перейдите во вкладку **Конфигурация**.
2.  В Редакторе Списка Моделей нажмите кнопку "+ Добавить модель". Появится новая пустая форма.
3.  Заполните поля: `model_name` (например, `my-new-model`), `provider` (`openai`), `model` (`gpt-4o`) и т.д.
4.  В области "Изменения (Diff)" вы увидите, как в `model_list` добавился новый элемент.
5.  Нажмите кнопку "Сохранить и Перезапустить" (`restart-btn`).
6.  Сервер перезапустится. Вернувшись во вкладку **Playground**, вы увидите, что `my-new-model` появился в списке доступных для запуска моделей.